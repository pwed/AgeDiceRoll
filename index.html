<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dice</title>
    <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css" />
    <script type="text/javascript">
        var apiKey = "5b4bb657-6c6e-4d82-ac35-2ea907f5c45e";
        function requestRandomOrg(json, idArray) {
            xhr = new XMLHttpRequest();
            var url = "https://api.random.org/json-rpc/1/invoke";
            xhr.open("POST", url, true);
            xhr.setRequestHeader("Content-type", "application/json");
            xhr.onreadystatechange =  function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    for (var i = 0; i < idArray.length; i++) {
                        document.getElementById(idArray[i]).innerHTML = JSON.parse(xhr.responseText).result.random.data[i];
                    }
                };
            };
            xhr.send(json);
        }

        function formRandomRequestJson(number, max, min, method, id) {
            var jsonOut = `{
        "jsonrpc": "2.0",
            "method": "` + method + `",
            "params": {
        "apiKey": "` + apiKey + `",
                "n": ` + number + `,
                "min": ` + min + `,
                "max": ` + max + `,
                "replacement": true
    },
        "id": ` + id + `
    }`;
            return jsonOut;
        }

        function roll(sides) {
            return Math.floor(Math.random() * sides) + 1;
        }

        function showRoll(noOfDice, sides) {
            for (var i = 0; i < noOfDice; i++) document.getElementById(i).innerHTML = roll(sides);
        }

        function wait(ms){
            var start = new Date().getTime();
            var end = start;
            while(end < start + ms) {
                end = new Date().getTime();
            }
        }

        function rollTrueRandom() {
            var idArray = ["n1", "n2", "n0"];
            requestRandomOrg(formRandomRequestJson(idArray.length, 6, 1, "generateIntegers", 30), idArray);
        }
    </script>
</head>
<body>
    <div class="w3-center container w3-padding-hor-128">
        <button class="w3-center w3-btn w3-purple" onclick="showRoll(3, 6);">Roll dice using built in built in javascript random number generator</button>
        <h1 id="rollarea"></h1>
        <div class="w3-row">
            <div class="w3-center w3-col m4 w3-card-2">
                <h1 id="0">Dice 1</h1>
            </div>
            <div class="w3-center w3-col m4 w3-card-2 w3-blue">
                <h1 id="1">Dice 2</h1>
            </div>
            <div class="w3-center w3-col m4 w3-card-2">
                <h1 id="2">Dive 3</h1>
            </div>
        </div>
        <p>Above is a demonstration of dice rolls generated through the pseudo random algorithm built into your browsers javascript engine.</p>
        <div class="w3-center container w3-padding-hor-128">
            <button class="w3-center w3-btn w3-purple" onclick="rollTrueRandom();">Roll dice using random.org random number api</button>
            <h1 id="nrollarea"></h1>
            <div class="w3-row">
                <div class="w3-center w3-col m4 w3-card-2">
                    <h1 id="n0">Dice 1</h1>
                </div>
                <div class="w3-center w3-col m4 w3-card-2 w3-blue">
                    <h1 id="n1">Dice 2</h1>
                </div>
                <div class="w3-center w3-col m4 w3-card-2">
                    <h1 id="n2">Dive 3</h1>
                </div>
            </div>
        </div>
        <p>Above is a demonstration of dice rolls generated through an API request to random.org who claim to return truly random numbers.</p>
    </div>
</body>
</html>